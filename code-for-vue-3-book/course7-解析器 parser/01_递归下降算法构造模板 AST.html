<script>
  // 着手实现一个更加完善的`模板解析器`，解析器的基本架构模型如下：
  const TextModes = {
    DATA: "DATA",
    RCDATA: "RCDATA",
    RAWTEXT: "RAWTEXT",
    CDATA: "CDATA",
  };

  // 解析器函数，接收模板字符串作为参数
  function parse(str) {
    const context = {
      // source 是模板内容，用于在解析过程中进行消费
      source: str,
      // 解析器当前处于文本模式，初始模式为 DATA
      mode: TextModes.DATA,
    };
    // 返回解析后得到的子节点。第一个参数context,第二个参数是由父代节点构成的节点栈，用于维护节点间的父子级关系，初始时栈为空
    const nodes = parseChildren(context, []);

    // 返回 root 根节点
    return {
      type: "Root",
      children: nodes,
    };
  }
</script>
